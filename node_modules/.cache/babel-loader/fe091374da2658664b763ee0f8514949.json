{"ast":null,"code":"'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar ParticipantSignaling = require('./participant');\n\nvar LocalParticipantSignaling =\n/** @class */\nfunction (_super) {\n  __extends(LocalParticipantSignaling, _super);\n\n  function LocalParticipantSignaling() {\n    var _this = _super.call(this) || this;\n\n    Object.defineProperties(_this, {\n      _publicationsToTrackSenders: {\n        value: new Map()\n      },\n      _trackSendersToPublications: {\n        value: new Map()\n      }\n    });\n    return _this;\n  }\n  /**\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @param {string} name\n   * @param {Track.Priority} priority\n   * @returns {LocalTrackPublicationSignaling} publication\n   */\n\n\n  LocalParticipantSignaling.prototype.addTrack = function (trackSender, name, priority) {\n    var publication = this._createLocalTrackPublicationSignaling(trackSender, name, priority);\n\n    this._trackSendersToPublications.set(trackSender, publication);\n\n    this._publicationsToTrackSenders.set(publication, trackSender);\n\n    _super.prototype.addTrack.call(this, publication);\n\n    return this;\n  };\n  /**\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @returns {?LocalTrackPublicationSignaling}\n   */\n\n\n  LocalParticipantSignaling.prototype.getPublication = function (trackSender) {\n    return this._trackSendersToPublications.get(trackSender) || null;\n  };\n  /**\n   * @param {LocalTrackPublicationSignaling} trackPublication\n   * @returns {?DataTrackSender|MediaTrackSender}\n   */\n\n\n  LocalParticipantSignaling.prototype.getSender = function (trackPublication) {\n    return this._publicationsToTrackSenders.get(trackPublication) || null;\n  };\n  /**\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @returns {?LocalTrackPublicationSignaling}\n   */\n\n\n  LocalParticipantSignaling.prototype.removeTrack = function (trackSender) {\n    var publication = this._trackSendersToPublications.get(trackSender);\n\n    if (!publication) {\n      return null;\n    }\n\n    this._trackSendersToPublications.delete(trackSender);\n\n    this._publicationsToTrackSenders.delete(publication);\n\n    var didDelete = _super.prototype.removeTrack.call(this, publication);\n\n    if (didDelete) {\n      publication.stop();\n    }\n\n    return publication;\n  };\n\n  return LocalParticipantSignaling;\n}(ParticipantSignaling);\n\nmodule.exports = LocalParticipantSignaling;","map":{"version":3,"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,oBAAoB,GAAGC,OAAO,CAAC,eAAD,CAApC;;AAEA;AAAA;AAAA;EAAwCC;;EACtC;IAAA,YACEC,qBAAO,IADT;;IAEEC,MAAM,CAACC,gBAAP,CAAwBC,KAAxB,EAA8B;MAC5BC,2BAA2B,EAAE;QAC3BC,KAAK,EAAE,IAAIC,GAAJ;MADoB,CADD;MAI5BC,2BAA2B,EAAE;QAC3BF,KAAK,EAAE,IAAIC,GAAJ;MADoB;IAJD,CAA9B;;EAQD;EAED;;;;;;;;EAMAE,yDAASC,WAAT,EAAsBC,IAAtB,EAA4BC,QAA5B,EAAoC;IAClC,IAAMC,WAAW,GAAG,KAAKC,qCAAL,CAA2CJ,WAA3C,EAAwDC,IAAxD,EAA8DC,QAA9D,CAApB;;IACA,KAAKJ,2BAAL,CAAiCO,GAAjC,CAAqCL,WAArC,EAAkDG,WAAlD;;IACA,KAAKR,2BAAL,CAAiCU,GAAjC,CAAqCF,WAArC,EAAkDH,WAAlD;;IACAT,iBAAMe,QAAN,CAAcC,IAAd,CAAc,IAAd,EAAeJ,WAAf;;IACA,OAAO,IAAP;EACD,CAND;EAQA;;;;;;EAIAJ,+DAAeC,WAAf,EAA0B;IACxB,OAAO,KAAKF,2BAAL,CAAiCU,GAAjC,CAAqCR,WAArC,KAAqD,IAA5D;EACD,CAFD;EAIA;;;;;;EAIAD,0DAAUU,gBAAV,EAA0B;IACxB,OAAO,KAAKd,2BAAL,CAAiCa,GAAjC,CAAqCC,gBAArC,KAA0D,IAAjE;EACD,CAFD;EAIA;;;;;;EAIAV,4DAAYC,WAAZ,EAAuB;IACrB,IAAMG,WAAW,GAAG,KAAKL,2BAAL,CAAiCU,GAAjC,CAAqCR,WAArC,CAApB;;IACA,IAAI,CAACG,WAAL,EAAkB;MAChB,OAAO,IAAP;IACD;;IACD,KAAKL,2BAAL,CAAiCY,MAAjC,CAAwCV,WAAxC;;IACA,KAAKL,2BAAL,CAAiCe,MAAjC,CAAwCP,WAAxC;;IACA,IAAMQ,SAAS,GAAGpB,iBAAMqB,WAAN,CAAiBL,IAAjB,CAAiB,IAAjB,EAAkBJ,WAAlB,CAAlB;;IACA,IAAIQ,SAAJ,EAAe;MACbR,WAAW,CAACU,IAAZ;IACD;;IACD,OAAOV,WAAP;EACD,CAZD;;EAaF;AAAC,CA5DD,CAAwCf,oBAAxC;;AA8DA0B,MAAM,CAACC,OAAP,GAAiBhB,yBAAjB","names":["ParticipantSignaling","require","__extends","_super","Object","defineProperties","_this","_publicationsToTrackSenders","value","Map","_trackSendersToPublications","LocalParticipantSignaling","trackSender","name","priority","publication","_createLocalTrackPublicationSignaling","set","addTrack","call","get","trackPublication","delete","didDelete","removeTrack","stop","module","exports"],"sources":["/home/samliu/repos/ieee/twilio-video-starter-kit/node_modules/twilio-video/lib/signaling/localparticipant.js"],"sourcesContent":["'use strict';\n\nconst ParticipantSignaling = require('./participant');\n\nclass LocalParticipantSignaling extends ParticipantSignaling {\n  constructor() {\n    super();\n    Object.defineProperties(this, {\n      _publicationsToTrackSenders: {\n        value: new Map()\n      },\n      _trackSendersToPublications: {\n        value: new Map()\n      }\n    });\n  }\n\n  /**\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @param {string} name\n   * @param {Track.Priority} priority\n   * @returns {LocalTrackPublicationSignaling} publication\n   */\n  addTrack(trackSender, name, priority) {\n    const publication = this._createLocalTrackPublicationSignaling(trackSender, name, priority);\n    this._trackSendersToPublications.set(trackSender, publication);\n    this._publicationsToTrackSenders.set(publication, trackSender);\n    super.addTrack(publication);\n    return this;\n  }\n\n  /**\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @returns {?LocalTrackPublicationSignaling}\n   */\n  getPublication(trackSender) {\n    return this._trackSendersToPublications.get(trackSender) || null;\n  }\n\n  /**\n   * @param {LocalTrackPublicationSignaling} trackPublication\n   * @returns {?DataTrackSender|MediaTrackSender}\n   */\n  getSender(trackPublication) {\n    return this._publicationsToTrackSenders.get(trackPublication) || null;\n  }\n\n  /**\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @returns {?LocalTrackPublicationSignaling}\n   */\n  removeTrack(trackSender) {\n    const publication = this._trackSendersToPublications.get(trackSender);\n    if (!publication) {\n      return null;\n    }\n    this._trackSendersToPublications.delete(trackSender);\n    this._publicationsToTrackSenders.delete(publication);\n    const didDelete = super.removeTrack(publication);\n    if (didDelete) {\n      publication.stop();\n    }\n    return publication;\n  }\n}\n\nmodule.exports = LocalParticipantSignaling;\n"]},"metadata":{},"sourceType":"script"}