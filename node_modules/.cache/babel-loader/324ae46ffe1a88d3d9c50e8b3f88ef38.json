{"ast":null,"code":"import _regeneratorRuntime from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import'./App.scss';import React,{Component}from'react';import Room from'./Room';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require('twilio-video'),connect=_require.connect;var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={identity:'',room:null};_this.inputRef=/*#__PURE__*/React.createRef();_this.joinRoom=_this.joinRoom.bind(_assertThisInitialized(_this));_this.returnToLobby=_this.returnToLobby.bind(_assertThisInitialized(_this));_this.updateIdentity=_this.updateIdentity.bind(_assertThisInitialized(_this));_this.removePlaceholderText=_this.removePlaceholderText.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"joinRoom\",value:function(){var _joinRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,room;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://token-service-6164-dev.twil.io/token?identity=\".concat(this.state.identity));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;_context.next=9;return connect(data.accessToken,{name:'cool room',audio:true,video:{width:window.screen.width,height:window.screen.height}});case 9:room=_context.sent;this.setState({room:room});_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,this,[[0,13]]);}));function joinRoom(){return _joinRoom.apply(this,arguments);}return joinRoom;}()},{key:\"returnToLobby\",value:function returnToLobby(){this.setState({room:null});}},{key:\"removePlaceholderText\",value:function removePlaceholderText(){this.inputRef.current.placeholder='';}},{key:\"updateIdentity\",value:function updateIdentity(event){this.setState({identity:event.target.value});}},{key:\"render\",value:function render(){var disabled=this.state.identity===''?true:false;return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:this.state.room===null?/*#__PURE__*/_jsxs(\"div\",{className:\"lobby\",children:[/*#__PURE__*/_jsx(\"input\",{value:this.state.identity,onChange:this.updateIdentity,ref:this.inputRef,onClick:this.removePlaceholderText,placeholder:\"What's your name?\"}),/*#__PURE__*/_jsx(\"button\",{disabled:disabled,onClick:this.joinRoom,children:\"Join Room\"})]}):/*#__PURE__*/_jsx(Room,{returnToLobby:this.returnToLobby,room:this.state.room})});}}]);return App;}(Component);export default App;","map":{"version":3,"names":["React","Component","Room","require","connect","App","props","state","identity","room","inputRef","createRef","joinRoom","bind","returnToLobby","updateIdentity","removePlaceholderText","fetch","response","json","data","accessToken","name","audio","video","width","window","screen","height","setState","console","log","current","placeholder","event","target","value","disabled"],"sources":["/home/samliu/repos/ieee/tp-robot/src/App.js"],"sourcesContent":["import './App.scss';\nimport React, {Component} from 'react';\nimport Room from './Room';\nconst { connect } = require('twilio-video');\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            identity: '', \n            room: null\n        }\n        this.inputRef = React.createRef();\n        this.joinRoom = this.joinRoom.bind(this);\n        this.returnToLobby = this.returnToLobby.bind(this);\n        this.updateIdentity = this.updateIdentity.bind(this);\n        this.removePlaceholderText = this.removePlaceholderText.bind(this);\n    }\n    \n    async joinRoom() {\n        try {\n          /// TODO: Insert Token\n          const response = await fetch(`https://token-service-6164-dev.twil.io/token?identity=${this.state.identity}`);\n\n\n          const data = await response.json();\n          const room = await connect(data.accessToken, {\n            name: 'cool room',\n            audio: true,\n            video: {width: window.screen.width, height: window.screen.height} \n          });\n      \n          this.setState({ room: room });\n        } catch(err) {\n          console.log(err);\n        }\n      }\n    \n      returnToLobby() {\n        this.setState({ room: null });\n      }\n\n      removePlaceholderText() {\n        this.inputRef.current.placeholder = '';\n      }\n\n      updateIdentity(event) {\n        this.setState({\n          identity: event.target.value\n        });\n      }\n      \n      render() {\n\n        const disabled = this.state.identity === '' ? true: false;\n\n\n        \n\n        return (\n          <div className=\"app\">\n            { \n              this.state.room === null\n              ? <div className=\"lobby\">\n                        <input \n                        \n                        value={this.state.identity}\n                        onChange={this.updateIdentity}\n                        ref={this.inputRef}\n                        onClick={this.removePlaceholderText} \n                        placeholder=\"What's your name?\"/>\n\n                  <button disabled={disabled} onClick={this.joinRoom}>Join Room</button>\n                </div>\n              : <Room returnToLobby={this.returnToLobby} room={this.state.room} />\n            }\n          </div>\n          \n        );\n      }\n}\n\n\n\nexport default App;"],"mappings":"00BAAA,MAAO,YAAP,CACA,MAAOA,MAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,KAAP,KAAiB,QAAjB,C,wFACA,aAAoBC,OAAO,CAAC,cAAD,CAA3B,CAAQC,OAAR,UAAQA,OAAR,C,GAGMC,I,0FACF,aAAYC,KAAZ,CAAmB,qCACf,uBAAMA,KAAN,EAEA,MAAKC,KAAL,CAAa,CACTC,QAAQ,CAAE,EADD,CAETC,IAAI,CAAE,IAFG,CAAb,CAIA,MAAKC,QAAL,cAAgBV,KAAK,CAACW,SAAN,EAAhB,CACA,MAAKC,QAAL,CAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB,CACA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBD,IAAnB,+BAArB,CACA,MAAKE,cAAL,CAAsB,MAAKA,cAAL,CAAoBF,IAApB,+BAAtB,CACA,MAAKG,qBAAL,CAA6B,MAAKA,qBAAL,CAA2BH,IAA3B,+BAA7B,CAXe,aAYlB,C,2HAED,kMAG6BI,MAAK,iEAA0D,KAAKV,KAAL,CAAWC,QAArE,EAHlC,QAGYU,QAHZ,qCAMyBA,SAAQ,CAACC,IAAT,EANzB,QAMYC,IANZ,qCAOyBhB,QAAO,CAACgB,IAAI,CAACC,WAAN,CAAmB,CAC3CC,IAAI,CAAE,WADqC,CAE3CC,KAAK,CAAE,IAFoC,CAG3CC,KAAK,CAAE,CAACC,KAAK,CAAEC,MAAM,CAACC,MAAP,CAAcF,KAAtB,CAA6BG,MAAM,CAAEF,MAAM,CAACC,MAAP,CAAcC,MAAnD,CAHoC,CAAnB,CAPhC,QAOYnB,IAPZ,eAaM,KAAKoB,QAAL,CAAc,CAAEpB,IAAI,CAAEA,IAAR,CAAd,EAbN,iFAeMqB,OAAO,CAACC,GAAR,cAfN,qE,+GAmBE,wBAAgB,CACd,KAAKF,QAAL,CAAc,CAAEpB,IAAI,CAAE,IAAR,CAAd,EACD,C,qCAED,gCAAwB,CACtB,KAAKC,QAAL,CAAcsB,OAAd,CAAsBC,WAAtB,CAAoC,EAApC,CACD,C,8BAED,wBAAeC,KAAf,CAAsB,CACpB,KAAKL,QAAL,CAAc,CACZrB,QAAQ,CAAE0B,KAAK,CAACC,MAAN,CAAaC,KADX,CAAd,EAGD,C,sBAED,iBAAS,CAEP,GAAMC,SAAQ,CAAG,KAAK9B,KAAL,CAAWC,QAAX,GAAwB,EAAxB,CAA6B,IAA7B,CAAmC,KAApD,CAKA,mBACE,YAAK,SAAS,CAAC,KAAf,UAEI,KAAKD,KAAL,CAAWE,IAAX,GAAoB,IAApB,cACE,aAAK,SAAS,CAAC,OAAf,wBACQ,cAEA,KAAK,CAAE,KAAKF,KAAL,CAAWC,QAFlB,CAGA,QAAQ,CAAE,KAAKO,cAHf,CAIA,GAAG,CAAE,KAAKL,QAJV,CAKA,OAAO,CAAE,KAAKM,qBALd,CAMA,WAAW,CAAC,mBANZ,EADR,cASE,eAAQ,QAAQ,CAAEqB,QAAlB,CAA4B,OAAO,CAAE,KAAKzB,QAA1C,uBATF,GADF,cAYE,KAAC,IAAD,EAAM,aAAa,CAAE,KAAKE,aAA1B,CAAyC,IAAI,CAAE,KAAKP,KAAL,CAAWE,IAA1D,EAdN,EADF,CAoBD,C,iBA3EWR,S,EAgFlB,cAAeI,IAAf"},"metadata":{},"sourceType":"module"}