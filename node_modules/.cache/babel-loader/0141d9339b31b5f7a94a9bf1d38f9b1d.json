{"ast":null,"code":"import _toConsumableArray from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/samliu/repos/ieee/tp-robot/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import'./App.scss';import Track from'./Track';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Participant=/*#__PURE__*/function(_Component){_inherits(Participant,_Component);var _super=_createSuper(Participant);function Participant(props){var _this;_classCallCheck(this,Participant);_this=_super.call(this,props);var existingPublications=Array.from(_this.props.participant.tracks.values());var existingTracks=existingPublications.map(function(publication){return publication.track;});var nonNullTracks=existingTracks.filter(function(track){return track!==null;});_this.state={tracks:nonNullTracks};return _this;}_createClass(Participant,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!this.props.localParticipant){this.props.participant.on('trackSubscribed',function(track){return _this2.addTrack(track);});}}},{key:\"addTrack\",value:function addTrack(track){this.setState({tracks:[].concat(_toConsumableArray(this.state.tracks),[track])});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"participant\",id:this.props.participant.identity,children:[/*#__PURE__*/_jsx(\"div\",{className:\"identity\",children:this.props.participant.identity}),this.state.tracks.map(function(track){return/*#__PURE__*/_jsx(Track,{filter:_this3.state.filter,track:track},track);})]});}}]);return Participant;}(Component);export default Participant;","map":{"version":3,"names":["React","Component","Track","Participant","props","existingPublications","Array","from","participant","tracks","values","existingTracks","map","publication","track","nonNullTracks","filter","state","localParticipant","on","addTrack","setState","identity"],"sources":["/home/samliu/repos/ieee/tp-robot/src/Participant.js"],"sourcesContent":["import React, {Component} from 'react';\nimport './App.scss';\nimport Track from './Track';\n\nclass Participant extends Component {\n    constructor(props) {\n        super(props);\n\n        const existingPublications = Array.from(this.props.participant.tracks.values());\n        const existingTracks = existingPublications.map(publication => publication.track);\n        const nonNullTracks = existingTracks.filter(track => track !== null)\n\n        this.state = {\n            tracks: nonNullTracks\n        }\n    }\n\n    componentDidMount () {\n        if (!this.props.localParticipant) {\n            this.props.participant.on('trackSubscribed', track => this.addTrack(track));\n        }\n    }\n    addTrack(track) {\n        this.setState({\n          tracks: [...this.state.tracks, track]\n        });\n    }\n\n    render() {\n        return ( \n          <div className=\"participant\" id={this.props.participant.identity}>\n            <div className=\"identity\">{ this.props.participant.identity}</div>\n            { \n              this.state.tracks.map(track => \n                <Track key={track} filter={this.state.filter} track={track}/>)\n            }\n          </div>\n        );\n    }\n}\n\nexport default Participant;\n"],"mappings":"skBAAA,MAAOA,MAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAO,YAAP,CACA,MAAOC,MAAP,KAAkB,SAAlB,C,2FAEMC,Y,0GACF,qBAAYC,KAAZ,CAAmB,6CACf,uBAAMA,KAAN,EAEA,GAAMC,qBAAoB,CAAGC,KAAK,CAACC,IAAN,CAAW,MAAKH,KAAL,CAAWI,WAAX,CAAuBC,MAAvB,CAA8BC,MAA9B,EAAX,CAA7B,CACA,GAAMC,eAAc,CAAGN,oBAAoB,CAACO,GAArB,CAAyB,SAAAC,WAAW,QAAIA,YAAW,CAACC,KAAhB,EAApC,CAAvB,CACA,GAAMC,cAAa,CAAGJ,cAAc,CAACK,MAAf,CAAsB,SAAAF,KAAK,QAAIA,MAAK,GAAK,IAAd,EAA3B,CAAtB,CAEA,MAAKG,KAAL,CAAa,CACTR,MAAM,CAAEM,aADC,CAAb,CAPe,aAUlB,C,yDAED,4BAAqB,iBACjB,GAAI,CAAC,KAAKX,KAAL,CAAWc,gBAAhB,CAAkC,CAC9B,KAAKd,KAAL,CAAWI,WAAX,CAAuBW,EAAvB,CAA0B,iBAA1B,CAA6C,SAAAL,KAAK,QAAI,OAAI,CAACM,QAAL,CAAcN,KAAd,CAAJ,EAAlD,EACH,CACJ,C,wBACD,kBAASA,KAAT,CAAgB,CACZ,KAAKO,QAAL,CAAc,CACZZ,MAAM,8BAAM,KAAKQ,KAAL,CAAWR,MAAjB,GAAyBK,KAAzB,EADM,CAAd,EAGH,C,sBAED,iBAAS,iBACL,mBACE,aAAK,SAAS,CAAC,aAAf,CAA6B,EAAE,CAAE,KAAKV,KAAL,CAAWI,WAAX,CAAuBc,QAAxD,wBACE,YAAK,SAAS,CAAC,UAAf,UAA4B,KAAKlB,KAAL,CAAWI,WAAX,CAAuBc,QAAnD,EADF,CAGI,KAAKL,KAAL,CAAWR,MAAX,CAAkBG,GAAlB,CAAsB,SAAAE,KAAK,qBACzB,KAAC,KAAD,EAAmB,MAAM,CAAE,MAAI,CAACG,KAAL,CAAWD,MAAtC,CAA8C,KAAK,CAAEF,KAArD,EAAYA,KAAZ,CADyB,EAA3B,CAHJ,GADF,CASH,C,yBAlCqBb,S,EAqC1B,cAAeE,YAAf"},"metadata":{},"sourceType":"module"}