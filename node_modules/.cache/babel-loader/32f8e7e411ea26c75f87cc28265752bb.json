{"ast":null,"code":"'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar LocalTrackPublicationSignaling = require('../localtrackpublication');\n\nvar createTwilioError = require('../../util/twilio-video-errors').createTwilioError;\n/**\n * @extends LocalTrackPublicationSignaling\n */\n\n\nvar LocalTrackPublicationV2 =\n/** @class */\nfunction (_super) {\n  __extends(LocalTrackPublicationV2, _super);\n  /**\n   * Construct a {@link LocalTrackPublicationV2}.\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @param {string} name\n   * @param {Track.Priority} priority\n   */\n\n\n  function LocalTrackPublicationV2(trackSender, name, priority) {\n    return _super.call(this, trackSender, name, priority) || this;\n  }\n  /**\n   * Get the {@link LocalTrackPublicationV2#Representation} of a given {@link TrackSignaling}.\n   * @returns {LocalTrackPublicationV2#Representation} - without the SID\n   */\n\n\n  LocalTrackPublicationV2.prototype.getState = function () {\n    return {\n      enabled: this.isEnabled,\n      id: this.id,\n      kind: this.kind,\n      name: this.name,\n      priority: this.updatedPriority\n    };\n  };\n  /**\n   * Compare the {@link LocalTrackPublicationV2} to a {@link LocalTrackPublicationV2#Representation} of itself\n   * and perform any updates necessary.\n   * @param {PublishedTrack} track\n   * @returns {this}\n   * @fires TrackSignaling#updated\n   */\n\n\n  LocalTrackPublicationV2.prototype.update = function (track) {\n    switch (track.state) {\n      case 'ready':\n        this.setSid(track.sid);\n        break;\n\n      case 'failed':\n        {\n          var error = track.error;\n          this.publishFailed(createTwilioError(error.code, error.message));\n          break;\n        }\n\n      default:\n        // 'created'\n        break;\n    }\n\n    return this;\n  };\n\n  return LocalTrackPublicationV2;\n}(LocalTrackPublicationSignaling);\n/**\n * The Room Signaling Protocol (RSP) representation of a {@link LocalTrackPublicationV2}.\n * @typedef {object} LocalTrackPublicationV2#Representation\n * @property {boolean} enabled\n * @property {Track.ID} id\n * @property {Track.Kind} kind\n * @property {string} name\n * @priority {Track.Priority} priority\n * @property {Track.SID} sid\n */\n\n\nmodule.exports = LocalTrackPublicationV2;","map":{"version":3,"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,8BAA8B,GAAGC,OAAO,CAAC,0BAAD,CAA9C;;AACA,IAAMC,iBAAiB,GAAGD,OAAO,CAAC,gCAAD,CAAP,CAA0CC,iBAApE;AAEA;;;;;AAGA;AAAA;AAAA;EAAsCC;EACpC;;;;;;;;EAMA,iCAAYC,WAAZ,EAAyBC,IAAzB,EAA+BC,QAA/B,EAAuC;WACrCC,kBAAMH,WAAN,EAAmBC,IAAnB,EAAyBC,QAAzB,KAAkC;EACnC;EAED;;;;;;EAIAE;IACE,OAAO;MACLC,OAAO,EAAE,KAAKC,SADT;MAELC,EAAE,EAAE,KAAKA,EAFJ;MAGLC,IAAI,EAAE,KAAKA,IAHN;MAILP,IAAI,EAAE,KAAKA,IAJN;MAKLC,QAAQ,EAAE,KAAKO;IALV,CAAP;EAOD,CARD;EAUA;;;;;;;;;EAOAL,qDAAOM,KAAP,EAAY;IACV,QAAQA,KAAK,CAACC,KAAd;MACE,KAAK,OAAL;QACE,KAAKC,MAAL,CAAYF,KAAK,CAACG,GAAlB;QACA;;MACF,KAAK,QAAL;QAAe;UACb,IAAMC,KAAK,GAAGJ,KAAK,CAACI,KAApB;UACA,KAAKC,aAAL,CAAmBjB,iBAAiB,CAACgB,KAAK,CAACE,IAAP,EAAaF,KAAK,CAACG,OAAnB,CAApC;UACA;QACD;;MACD;QAAS;QACP;IAVJ;;IAYA,OAAO,IAAP;EACD,CAdD;;EAeF;AAAC,CA/CD,CAAsCrB,8BAAtC;AAiDA;;;;;;;;;;;;AAWAsB,MAAM,CAACC,OAAP,GAAiBf,uBAAjB","names":["LocalTrackPublicationSignaling","require","createTwilioError","__extends","trackSender","name","priority","_super","LocalTrackPublicationV2","enabled","isEnabled","id","kind","updatedPriority","track","state","setSid","sid","error","publishFailed","code","message","module","exports"],"sources":["/home/samliu/repos/ieee/twilio-video-starter-kit/node_modules/twilio-video/lib/signaling/v2/localtrackpublication.js"],"sourcesContent":["'use strict';\n\nconst LocalTrackPublicationSignaling = require('../localtrackpublication');\nconst createTwilioError = require('../../util/twilio-video-errors').createTwilioError;\n\n/**\n * @extends LocalTrackPublicationSignaling\n */\nclass LocalTrackPublicationV2 extends LocalTrackPublicationSignaling {\n  /**\n   * Construct a {@link LocalTrackPublicationV2}.\n   * @param {DataTrackSender|MediaTrackSender} trackSender\n   * @param {string} name\n   * @param {Track.Priority} priority\n   */\n  constructor(trackSender, name, priority) {\n    super(trackSender, name, priority);\n  }\n\n  /**\n   * Get the {@link LocalTrackPublicationV2#Representation} of a given {@link TrackSignaling}.\n   * @returns {LocalTrackPublicationV2#Representation} - without the SID\n   */\n  getState() {\n    return {\n      enabled: this.isEnabled,\n      id: this.id,\n      kind: this.kind,\n      name: this.name,\n      priority: this.updatedPriority\n    };\n  }\n\n  /**\n   * Compare the {@link LocalTrackPublicationV2} to a {@link LocalTrackPublicationV2#Representation} of itself\n   * and perform any updates necessary.\n   * @param {PublishedTrack} track\n   * @returns {this}\n   * @fires TrackSignaling#updated\n   */\n  update(track) {\n    switch (track.state) {\n      case 'ready':\n        this.setSid(track.sid);\n        break;\n      case 'failed': {\n        const error = track.error;\n        this.publishFailed(createTwilioError(error.code, error.message));\n        break;\n      }\n      default: // 'created'\n        break;\n    }\n    return this;\n  }\n}\n\n/**\n * The Room Signaling Protocol (RSP) representation of a {@link LocalTrackPublicationV2}.\n * @typedef {object} LocalTrackPublicationV2#Representation\n * @property {boolean} enabled\n * @property {Track.ID} id\n * @property {Track.Kind} kind\n * @property {string} name\n * @priority {Track.Priority} priority\n * @property {Track.SID} sid\n */\n\nmodule.exports = LocalTrackPublicationV2;\n"]},"metadata":{},"sourceType":"script"}