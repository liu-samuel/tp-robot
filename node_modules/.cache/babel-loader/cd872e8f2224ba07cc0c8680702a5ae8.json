{"ast":null,"code":"import _toConsumableArray from\"/home/samliu/repos/ieee/twilio-video-starter-kit/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/home/samliu/repos/ieee/twilio-video-starter-kit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/samliu/repos/ieee/twilio-video-starter-kit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/samliu/repos/ieee/twilio-video-starter-kit/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/samliu/repos/ieee/twilio-video-starter-kit/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/samliu/repos/ieee/twilio-video-starter-kit/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import'./App.scss';import Participant from'./Participant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Room=/*#__PURE__*/function(_Component){_inherits(Room,_Component);var _super=_createSuper(Room);function Room(props){var _this;_classCallCheck(this,Room);_this=_super.call(this,props);_this.state={remoteParticipants:Array.from(_this.props.room.participants.values())};_this.leaveRoom=_this.leaveRoom.bind(_assertThisInitialized(_this));return _this;}_createClass(Room,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.room.on('participantConnected',function(participant){return _this2.addParticipant(participant);});this.props.room.on('participantDisconnected',function(participant){return _this2.removeParticipant(participant);});window.addEventListener(\"beforeunload\",this.leaveRoom);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.leaveRoom();}},{key:\"addParticipant\",value:function addParticipant(participant){console.log(\"\".concat(participant.identity,\" has joined the room.\"));this.setState({remoteParticipants:[].concat(_toConsumableArray(this.state.remoteParticipants),[participant])});}},{key:\"removeParticipant\",value:function removeParticipant(participant){console.log(\"\".concat(participant.identity,\" has left the room\"));this.setState({remoteParticipants:this.state.remoteParticipants.filter(function(p){return p.identity!==participant.identity;})});}},{key:\"leaveRoom\",value:function leaveRoom(){this.props.room.disconnect();this.props.returnToLobby();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"room\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"participants\",children:[/*#__PURE__*/_jsx(Participant,{localParticipant:\"true\",participant:this.props.room.localParticipant},this.props.room.localParticipant.identity),this.state.remoteParticipants.map(function(participant){return/*#__PURE__*/_jsx(Participant,{participant:participant},participant.identity);})]})});}}]);return Room;}(Component);export default Room;","map":{"version":3,"names":["React","Component","Participant","Room","props","state","remoteParticipants","Array","from","room","participants","values","leaveRoom","bind","on","participant","addParticipant","removeParticipant","window","addEventListener","console","log","identity","setState","filter","p","disconnect","returnToLobby","localParticipant","map"],"sources":["/home/samliu/repos/ieee/twilio-video-starter-kit/src/Room.js"],"sourcesContent":["import React, {Component} from 'react';\nimport './App.scss';\nimport Participant from './Participant';\n\nclass Room extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            remoteParticipants: Array.from(this.props.room.participants.values())\n        }\n        this.leaveRoom = this.leaveRoom.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.room.on('participantConnected', participant => this.addParticipant(participant));\n        this.props.room.on('participantDisconnected', participant => this.removeParticipant(participant));\n        \n        window.addEventListener(\"beforeunload\", this.leaveRoom);\n    }\n\n    componentWillUnmount() {\n        this.leaveRoom();\n    }\n\n    addParticipant(participant) {\n        console.log(`${participant.identity} has joined the room.`);\n        \n        this.setState({\n          remoteParticipants: [...this.state.remoteParticipants, participant]\n        });\n    }\n    \n    removeParticipant(participant) {\n        console.log(`${participant.identity} has left the room`);\n\n        this.setState({\n            remoteParticipants: this.state.remoteParticipants.filter(p => p.identity !== participant.identity)\n        });\n    }\n    \n    leaveRoom() {\n        this.props.room.disconnect();\n        this.props.returnToLobby();\n    }\n\n    render() {\n        return (\n          <div className=\"room\">\n            <div className = \"participants\">\n              \n              <Participant key={this.props.room.localParticipant.identity} localParticipant=\"true\" participant={this.props.room.localParticipant}/>\n              {\n                this.state.remoteParticipants.map(participant => \n                  <Participant key={participant.identity} participant={participant}/>\n                )\n              }\n            </div>\n          </div>\n        );\n    }\n}\n\nexport default Room;\n"],"mappings":"4yBAAA,MAAOA,MAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAO,YAAP,CACA,MAAOC,YAAP,KAAwB,eAAxB,C,2FAEMC,K,4FACF,cAAYC,KAAZ,CAAmB,sCACf,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACTC,kBAAkB,CAAEC,KAAK,CAACC,IAAN,CAAW,MAAKJ,KAAL,CAAWK,IAAX,CAAgBC,YAAhB,CAA6BC,MAA7B,EAAX,CADX,CAAb,CAGA,MAAKC,SAAL,CAAiB,MAAKA,SAAL,CAAeC,IAAf,+BAAjB,CALe,aAMlB,C,kDAED,4BAAoB,iBAChB,KAAKT,KAAL,CAAWK,IAAX,CAAgBK,EAAhB,CAAmB,sBAAnB,CAA2C,SAAAC,WAAW,QAAI,OAAI,CAACC,cAAL,CAAoBD,WAApB,CAAJ,EAAtD,EACA,KAAKX,KAAL,CAAWK,IAAX,CAAgBK,EAAhB,CAAmB,yBAAnB,CAA8C,SAAAC,WAAW,QAAI,OAAI,CAACE,iBAAL,CAAuBF,WAAvB,CAAJ,EAAzD,EAEAG,MAAM,CAACC,gBAAP,CAAwB,cAAxB,CAAwC,KAAKP,SAA7C,EACH,C,oCAED,+BAAuB,CACnB,KAAKA,SAAL,GACH,C,8BAED,wBAAeG,WAAf,CAA4B,CACxBK,OAAO,CAACC,GAAR,WAAeN,WAAW,CAACO,QAA3B,2BAEA,KAAKC,QAAL,CAAc,CACZjB,kBAAkB,8BAAM,KAAKD,KAAL,CAAWC,kBAAjB,GAAqCS,WAArC,EADN,CAAd,EAGH,C,iCAED,2BAAkBA,WAAlB,CAA+B,CAC3BK,OAAO,CAACC,GAAR,WAAeN,WAAW,CAACO,QAA3B,wBAEA,KAAKC,QAAL,CAAc,CACVjB,kBAAkB,CAAE,KAAKD,KAAL,CAAWC,kBAAX,CAA8BkB,MAA9B,CAAqC,SAAAC,CAAC,QAAIA,EAAC,CAACH,QAAF,GAAeP,WAAW,CAACO,QAA/B,EAAtC,CADV,CAAd,EAGH,C,yBAED,oBAAY,CACR,KAAKlB,KAAL,CAAWK,IAAX,CAAgBiB,UAAhB,GACA,KAAKtB,KAAL,CAAWuB,aAAX,GACH,C,sBAED,iBAAS,CACL,mBACE,YAAK,SAAS,CAAC,MAAf,uBACE,aAAK,SAAS,CAAG,cAAjB,wBAEE,KAAC,WAAD,EAA6D,gBAAgB,CAAC,MAA9E,CAAqF,WAAW,CAAE,KAAKvB,KAAL,CAAWK,IAAX,CAAgBmB,gBAAlH,EAAkB,KAAKxB,KAAL,CAAWK,IAAX,CAAgBmB,gBAAhB,CAAiCN,QAAnD,CAFF,CAII,KAAKjB,KAAL,CAAWC,kBAAX,CAA8BuB,GAA9B,CAAkC,SAAAd,WAAW,qBAC3C,KAAC,WAAD,EAAwC,WAAW,CAAEA,WAArD,EAAkBA,WAAW,CAACO,QAA9B,CAD2C,EAA7C,CAJJ,GADF,EADF,CAaH,C,kBAvDcrB,S,EA0DnB,cAAeE,KAAf"},"metadata":{},"sourceType":"module"}