{"ast":null,"code":"/* eslint new-cap:0 */\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar TrackPublication = require('./trackpublication');\n\nvar _a = require('../../util/constants'),\n    E = _a.typeErrors,\n    trackPriority = _a.trackPriority;\n/**\n * A {@link LocalTrackPublication} is a {@link LocalTrack} that has been\n * published to a {@link Room}.\n * @extends TrackPublication\n * @property {boolean} isTrackEnabled - whether the published {@link LocalTrack}\n *   is enabled\n * @property {Track.Kind} kind - kind of the published {@link LocalTrack}\n * @property {Track.Priority} priority - the publish priority of the {@link LocalTrack}\n * @property {LocalTrack} track - the {@link LocalTrack}\n */\n\n\nvar LocalTrackPublication =\n/** @class */\nfunction (_super) {\n  __extends(LocalTrackPublication, _super);\n  /**\n   * Construct a {@link LocalTrackPublication}.\n   * @param {LocalTrackPublicationSignaling} signaling - The corresponding\n   *   {@link LocalTrackPublicationSignaling}\n   * @param {LocalTrack} track - The {@link LocalTrack}\n   * @param {function(LocalTrackPublication): void} unpublish - The callback\n   *   that unpublishes the {@link LocalTrackPublication}\n   * @param {TrackPublicationOptions} options - {@link LocalTrackPublication}\n   *   options\n   */\n\n\n  function LocalTrackPublication(signaling, track, unpublish, options) {\n    var _this = _super.call(this, track.name, signaling.sid, options) || this;\n\n    Object.defineProperties(_this, {\n      _reemitTrackEvent: {\n        value: function () {\n          return _this.emit(_this.isTrackEnabled ? 'trackEnabled' : 'trackDisabled');\n        }\n      },\n      _signaling: {\n        value: signaling\n      },\n      _unpublish: {\n        value: unpublish\n      },\n      isTrackEnabled: {\n        enumerable: true,\n        get: function () {\n          return this.track.kind === 'data' ? true : this.track.isEnabled;\n        }\n      },\n      kind: {\n        enumerable: true,\n        value: track.kind\n      },\n      priority: {\n        enumerable: true,\n        get: function () {\n          return signaling.updatedPriority;\n        }\n      },\n      track: {\n        enumerable: true,\n        value: track\n      }\n    });\n    track.on('disabled', _this._reemitTrackEvent);\n    track.on('enabled', _this._reemitTrackEvent);\n    return _this;\n  }\n\n  LocalTrackPublication.prototype.toString = function () {\n    return \"[LocalTrackPublication #\" + this._instanceId + \": \" + this.trackSid + \"]\";\n  };\n  /**\n   * Update the {@link Track.Priority} of the published {@link LocalTrack}.\n   * @param {Track.Priority} priority - the new {@link Track.priority}\n   * @returns {this}\n   * @throws {RangeError}\n   */\n\n\n  LocalTrackPublication.prototype.setPriority = function (priority) {\n    var priorityValues = Object.values(trackPriority);\n\n    if (!priorityValues.includes(priority)) {\n      throw E.INVALID_VALUE('priority', priorityValues);\n    }\n\n    this._signaling.setPriority(priority);\n\n    return this;\n  };\n  /**\n   * Unpublish a {@link LocalTrackPublication}. This means that the media\n   * from this {@link LocalTrackPublication} is no longer available to the\n   * {@link Room}'s {@link RemoteParticipant}s.\n   * @returns {this}\n   */\n\n\n  LocalTrackPublication.prototype.unpublish = function () {\n    this.track.removeListener('disabled', this._reemitTrackEvent);\n    this.track.removeListener('enabled', this._reemitTrackEvent);\n\n    this._unpublish(this);\n\n    return this;\n  };\n\n  return LocalTrackPublication;\n}(TrackPublication);\n\nmodule.exports = LocalTrackPublication;","map":{"version":3,"mappings":"AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,gBAAgB,GAAGC,OAAO,CAAC,oBAAD,CAAhC;;AACM,SAAmCA,OAAO,CAAC,sBAAD,CAA1C;AAAA,IAAcC,CAAC,gBAAf;AAAA,IAAiBC,aAAa,mBAA9B;AAEN;;;;;;;;;;;;AAUA;AAAA;AAAA;EAAoCC;EAClC;;;;;;;;;;;;EAUA,+BAAYC,SAAZ,EAAuBC,KAAvB,EAA8BC,SAA9B,EAAyCC,OAAzC,EAAgD;IAAhD,YACEC,kBAAMH,KAAK,CAACI,IAAZ,EAAkBL,SAAS,CAACM,GAA5B,EAAiCH,OAAjC,KAAyC,IAD3C;;IAGEI,MAAM,CAACC,gBAAP,CAAwBC,KAAxB,EAA8B;MAC5BC,iBAAiB,EAAE;QACjBC,KAAK,EAAE;UAAM,YAAI,CAACC,IAAL,CAAUH,KAAI,CAACI,cAAL,GACnB,cADmB,GAEnB,eAFS;QAEO;MAHH,CADS;MAM5BC,UAAU,EAAE;QACVH,KAAK,EAAEX;MADG,CANgB;MAS5Be,UAAU,EAAE;QACVJ,KAAK,EAAET;MADG,CATgB;MAY5BW,cAAc,EAAE;QACdG,UAAU,EAAE,IADE;QAEdC,GAAG;UACD,OAAO,KAAKhB,KAAL,CAAWiB,IAAX,KAAoB,MAApB,GAA6B,IAA7B,GAAoC,KAAKjB,KAAL,CAAWkB,SAAtD;QACD;MAJa,CAZY;MAkB5BD,IAAI,EAAE;QACJF,UAAU,EAAE,IADR;QAEJL,KAAK,EAAEV,KAAK,CAACiB;MAFT,CAlBsB;MAsB5BE,QAAQ,EAAE;QACRJ,UAAU,EAAE,IADJ;QAERC,GAAG;UACD,OAAOjB,SAAS,CAACqB,eAAjB;QACD;MAJO,CAtBkB;MA4B5BpB,KAAK,EAAE;QACLe,UAAU,EAAE,IADP;QAELL,KAAK,EAAEV;MAFF;IA5BqB,CAA9B;IAkCAA,KAAK,CAACqB,EAAN,CAAS,UAAT,EAAqBb,KAAI,CAACC,iBAA1B;IACAT,KAAK,CAACqB,EAAN,CAAS,SAAT,EAAoBb,KAAI,CAACC,iBAAzB;;EACD;;EAEDa;IACE,OAAO,6BAA2B,KAAKC,WAAhC,GAA2C,IAA3C,GAAgD,KAAKC,QAArD,GAA6D,GAApE;EACD,CAFD;EAIA;;;;;;;;EAMAF,wDAAYH,QAAZ,EAAoB;IAClB,IAAMM,cAAc,GAAGnB,MAAM,CAACoB,MAAP,CAAc7B,aAAd,CAAvB;;IACA,IAAI,CAAC4B,cAAc,CAACE,QAAf,CAAwBR,QAAxB,CAAL,EAAwC;MACtC,MAAMvB,CAAC,CAACgC,aAAF,CAAgB,UAAhB,EAA4BH,cAA5B,CAAN;IACD;;IACD,KAAKZ,UAAL,CAAgBgB,WAAhB,CAA4BV,QAA5B;;IACA,OAAO,IAAP;EACD,CAPD;EASA;;;;;;;;EAMAG;IACE,KAAKtB,KAAL,CAAW8B,cAAX,CAA0B,UAA1B,EAAsC,KAAKrB,iBAA3C;IACA,KAAKT,KAAL,CAAW8B,cAAX,CAA0B,SAA1B,EAAqC,KAAKrB,iBAA1C;;IACA,KAAKK,UAAL,CAAgB,IAAhB;;IACA,OAAO,IAAP;EACD,CALD;;EAMF;AAAC,CAnFD,CAAoCpB,gBAApC;;AAqFAqC,MAAM,CAACC,OAAP,GAAiBV,qBAAjB","names":["TrackPublication","require","E","trackPriority","__extends","signaling","track","unpublish","options","_super","name","sid","Object","defineProperties","_this","_reemitTrackEvent","value","emit","isTrackEnabled","_signaling","_unpublish","enumerable","get","kind","isEnabled","priority","updatedPriority","on","LocalTrackPublication","_instanceId","trackSid","priorityValues","values","includes","INVALID_VALUE","setPriority","removeListener","module","exports"],"sources":["/home/samliu/repos/ieee/twilio-video-starter-kit/node_modules/twilio-video/lib/media/track/localtrackpublication.js"],"sourcesContent":["/* eslint new-cap:0 */\n'use strict';\n\nconst TrackPublication = require('./trackpublication');\nconst { typeErrors: E, trackPriority } = require('../../util/constants');\n\n/**\n * A {@link LocalTrackPublication} is a {@link LocalTrack} that has been\n * published to a {@link Room}.\n * @extends TrackPublication\n * @property {boolean} isTrackEnabled - whether the published {@link LocalTrack}\n *   is enabled\n * @property {Track.Kind} kind - kind of the published {@link LocalTrack}\n * @property {Track.Priority} priority - the publish priority of the {@link LocalTrack}\n * @property {LocalTrack} track - the {@link LocalTrack}\n */\nclass LocalTrackPublication extends TrackPublication {\n  /**\n   * Construct a {@link LocalTrackPublication}.\n   * @param {LocalTrackPublicationSignaling} signaling - The corresponding\n   *   {@link LocalTrackPublicationSignaling}\n   * @param {LocalTrack} track - The {@link LocalTrack}\n   * @param {function(LocalTrackPublication): void} unpublish - The callback\n   *   that unpublishes the {@link LocalTrackPublication}\n   * @param {TrackPublicationOptions} options - {@link LocalTrackPublication}\n   *   options\n   */\n  constructor(signaling, track, unpublish, options) {\n    super(track.name, signaling.sid, options);\n\n    Object.defineProperties(this, {\n      _reemitTrackEvent: {\n        value: () => this.emit(this.isTrackEnabled\n          ? 'trackEnabled'\n          : 'trackDisabled')\n      },\n      _signaling: {\n        value: signaling\n      },\n      _unpublish: {\n        value: unpublish\n      },\n      isTrackEnabled: {\n        enumerable: true,\n        get() {\n          return this.track.kind === 'data' ? true : this.track.isEnabled;\n        }\n      },\n      kind: {\n        enumerable: true,\n        value: track.kind\n      },\n      priority: {\n        enumerable: true,\n        get() {\n          return signaling.updatedPriority;\n        }\n      },\n      track: {\n        enumerable: true,\n        value: track\n      }\n    });\n\n    track.on('disabled', this._reemitTrackEvent);\n    track.on('enabled', this._reemitTrackEvent);\n  }\n\n  toString() {\n    return `[LocalTrackPublication #${this._instanceId}: ${this.trackSid}]`;\n  }\n\n  /**\n   * Update the {@link Track.Priority} of the published {@link LocalTrack}.\n   * @param {Track.Priority} priority - the new {@link Track.priority}\n   * @returns {this}\n   * @throws {RangeError}\n   */\n  setPriority(priority) {\n    const priorityValues = Object.values(trackPriority);\n    if (!priorityValues.includes(priority)) {\n      throw E.INVALID_VALUE('priority', priorityValues);\n    }\n    this._signaling.setPriority(priority);\n    return this;\n  }\n\n  /**\n   * Unpublish a {@link LocalTrackPublication}. This means that the media\n   * from this {@link LocalTrackPublication} is no longer available to the\n   * {@link Room}'s {@link RemoteParticipant}s.\n   * @returns {this}\n   */\n  unpublish() {\n    this.track.removeListener('disabled', this._reemitTrackEvent);\n    this.track.removeListener('enabled', this._reemitTrackEvent);\n    this._unpublish(this);\n    return this;\n  }\n}\n\nmodule.exports = LocalTrackPublication;\n"]},"metadata":{},"sourceType":"script"}